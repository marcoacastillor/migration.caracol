BROKER SCHEMA co.com.caracol.services.facade

CREATE COMPUTE MODULE AutenticaUsuario_RQ_CreateErrorMessage
	CREATE FUNCTION Main() RETURNS BOOLEAN
	BEGIN
		--Declarar referencia de mensaje de entrada
		DECLARE refInp REFERENCE TO InputRoot;
		MOVE refInp LASTCHILD;
		MOVE refInp LASTCHILD;
		MOVE refInp LASTCHILD;
		
		--Declaraci√≥n variables
		DECLARE wrapper CHARACTER REPLACE(FIELDNAME(refInp),'Request','Response');
		DECLARE ns NAMESPACE FIELDNAMESPACE(refInp);
		
		--Crear mensaje de salida
		CREATE FIELD OutputRoot.XMLNSC NAMESPACE ns NAME wrapper;
		DECLARE refOut REFERENCE TO OutputRoot.XMLNSC NAMESPACE ns NAME wrapper;
		
		--Declarar variables
		DECLARE codeError, nameError, descError CHARACTER '';
		
		--Si existe ExceptionList
		CALL co.com.caracol.integration.commos.getDescriptionExceptionList(InputExceptionList,codeError,nameError,descError);	
		
		SET refOut.UsuarioAutenticarResult = codeError || ' : ' || nameError || ' : ' || descError;
		
		RETURN TRUE;
	END;
END MODULE;